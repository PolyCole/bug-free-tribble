<!DOCTYPE html>
{% load static %}
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Cole Polyak">
    <meta name="description" content="The site for my final project for Literary Inquiry: The Pastoral">
    <title>Pastoral Poetry</title>
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'css/particles.css' %}">

    <link rel="icon" href="https://101clipart.com/wp-content/uploads/11/Tree%20Clipart%20Png%2018.png">

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
            crossorigin="anonymous"></script>

</head>
<body style="width:200vh; height:200vh; overflow:hidden;">
<div class="particle-wrapper">
    <div id="particles-js" style="position:fixed;">
        <div class="content-wrapper">
            <div class="col-lg title" style="margin-top: 8px;"><h1>Literary Inquiry: The Pastoral</h1></div>

            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="poetry-tab" data-toggle="tab" href="#poetrygen" role="tab"
                       aria-controls="poetrygen" aria-selected="false">Generate Poetry</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="about-tab" data-toggle="tab" href="#about" role="tab"
                       aria-controls="about" aria-selected="true">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="technical-tab" data-toggle="tab" href="#technical" role="tab"
                       aria-controls="technical" aria-selected="false">Technicals</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="analysis-tab" data-toggle="tab" href="#analysis" role="tab"
                       aria-controls="analysis" aria-selected="false">Poetry Analysis</a>
                </li>
            </ul>
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="poetrygen" role="tabpanel" aria-labelledby="poetry-tab">
                    <div class="col-md">
                        <h4 style="margin-top: 10px;">Generate Poetry</h4>
                        <p>
                            Hello there. To take a look at some of the poetry generated by the recurrent neural net,
                            please use the
                            button below.
                            By default, the model will display 1000 characters of generated poetry, with varying
                            temperature levels.
                        </p>

                        <p>
                            If you see a temperature value that's closer to 1.0, it means the generated text is more
                            experimental. Temperature values that are closer to 0.0 are more probabilistic, meaning that
                            the model relies more heavily on the calculated model to generate text.
                        </p>

                        <div class="container">
                            <div class="btn btn-primary" onclick="creatediv()">Generate Poetry</div>
                        </div>
                        <div id="poetryWrapper"></div>

                    </div>
                </div>

                <div class="tab-pane fade" id="about" role="tabpanel" aria-labelledby="about-tab">
                    <div class="col-md">
                        <h4 style="margin-top: 10px;">About</h4>
                        <p>
                            For my final project in Honors Literary Inquiry: The Pastoral, we were tasked with creating
                            some sort of
                            project roughly equivalent to a 14-page term paper. All quarter, we had been discussing
                            different pastoral elements found in literature through various poems, books, and videos.
                            In one of the novels we read,<em>Do Androids Dream of Electric Sheep</em> by Philip Dick,
                            there was a moment when one of the characters, John Isidore begins to theorize about how a
                            certain talkshow host named Buster Friendly, has the time to produce the content displayed
                            during his 24/7 audio and
                            video show.
                        </p>

                        <p>
                            The answer, to any human reading the novel, is that Buster Friendly is an android, tasked
                            solely with generating content to put on air during his show. This section got me wondering,
                            is it possible to have a computer generate content with some of the pastoral elements we've
                            discussed in class using today's technology? So I got to researching. I found a tutorial
                            on TensorFlow's website about generating text using a Recurrent Neural Network, and began my
                            proceedings there.
                        </p>

                        <p>
                            Thanks to a dataset I found on Kaggle, I had access to 22.09MB of poetry from the Poetry
                            Foundation's website, which would serve as the training set for my mode. I also spiced it up
                            by adding the works of a few of the authors we talked about in class. After training the
                            model, I could begin asking it to generate poetry of its own, some of which you can view
                            under the "Generate Poetry" tab.
                        </p>

                        <p>
                            If you'd like to learn more about the specific tech used in this project, or see how I
                            interpret some of the poems generated (warning, I'm pretty awful at poetry interpretation
                            ðŸ™‚), feel free to check out the Techincals or Analysis tabs, respectively.
                        </p>
                    </div>
                </div>

                <div class="tab-pane fade" id="technical" role="tabpanel" aria-labelledby="technical-tab">
                    <div class="col-md">
                        <h4 style="margin-top: 10px;">Machine Learning Component</h4>
                        <p>
                            The machine learning component for this project was written in Python using primarily
                            Tensorflow
                            and NumPy. Jupyter notebook was leveraged for model training and text generation.
                        </p>
                        <p>
                            The ML Algorithm itself was heavily based on the <a
                                href="https://www.tensorflow.org/tutorials/text/text_generation" target="_blank">RNN
                            Text
                            Gen</a> tutorial hosted on the TensoorFlow website, with a few minor tweaks to fit the
                            specific use case.
                        </p>

                        <h4>Web Component</h4>
                        <p>
                            The web portion of this project was written using Django, and deployed using Heroku. In an
                            ideal world, the RNN would have been hosted in AWS SageMaker and live queried during user
                            interaction, but hosting in SageMaker was more expensive than I anticipated, so I had to get
                            a little bit creative.
                        </p>

                        <p>
                            What I did was once my model was sufficiently trained, I had it generate 2,500 1,000
                            character text samples with random temperature values and output them. Then, I was able to
                            store those snippets in an S3 bucket and just pull them at random into the Web App.
                        </p>
                        <p>
                            Hacky, I know, but I don't have the budget to be incurring those AWS hosting fees ðŸ˜Š
                        </p>
                    </div>
                </div>

                <div class="tab-pane fade" id="analysis" role="tabpanel" aria-labelledby="analysis-tab">
                    <div class="col-md">
                        <h4 style="margin-top: 10px;">Analysis</h4>
                        <p>Again, don't judge me on this, I'm a CS guy, not a poet.</p>
                    </div>
                </div>
            </div>


        </div>
    </div>
</div>
<script src="{% static 'js/particles.js' %}"></script>
<script src="{% static 'js/app.js' %}"></script>
<script src="{% static 'js/bootstrap.js' %}"></script>
<script>
    async function creatediv() {
        const poetryDiv = document.getElementById("poetry");
        if (poetryDiv != undefined) {
            poetryDiv.remove();
        }

        const poem = await getPoetry();
        let newPoem = document.createElement('span');
        newPoem.className = "poem";
        newPoem.id = "poetry";
        newPoem.innerHTML = poem.toString();
        console.log(document.getElementById("poetryWrapper"));
        document.getElementById("poetryWrapper").appendChild(newPoem);
    }

    async function getPoetry() {
        const proxyurl = "https://cors-anywhere.herokuapp.com/";
        const resourceurl = "https://pastoral-poetry.s3.amazonaws.com/1.txt";

        const response = await fetch(proxyurl + resourceurl)
            .then(response => response.text());

        console.log(response);
        return response;
    }
</script>

</body>
</html>